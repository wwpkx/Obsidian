# 概念
- Internet control massage protocol 因特网**控制**协议
- 在主机与路由器之间传递**控制信息**，包括报告错误、交换受限控制和状态信息等
- 基于 ICMP 实现的命令
	- ping 测试网络**可达性，延迟，丢包**
	- tracert 显示经过的**路径**

# ICMP的格式
![](../../photo/Pasted%20image%2020221025181043.png)
![](../../photo/Pasted%20image%2020221025181132.png)

# 应用
## ping
| 状态   | 含义                                                    |
|------|-------------------------------------------------------|
| 成功   | 对方成功回响                                                |
| 超时   | 对方主机不在线（有对方MAC地址缓存，对方可能关机）<br/>对方主机屏蔽 （对方开启了策略“如防火墙”） |
| 传输失败 | 物理链路/网卡问题，网关未指定                                       |
| 无法访问 | 未获取到MAC地址，导致无法进行ICMP封装                                |

1. 无法访问（内网中不存在这样的主机）
	- ping内网某主机（包括网关），找不到ip对应的mac地址
	- **不能构建icmp包**，因为没有目的mac地址
	- 经过交换机，源/目的mac地址 不会改变
	- 经过路由器，源/目的mac地址 都会改变
2. 传输失败（物理链路/网卡问题，网关未指定）
	1.

## tracert 